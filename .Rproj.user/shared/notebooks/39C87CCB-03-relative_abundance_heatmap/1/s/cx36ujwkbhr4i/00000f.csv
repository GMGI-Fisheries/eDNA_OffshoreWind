"0","data %>% "
"0","  ### subset data"
"0","  filter(!Category == ""Other"" & !Category == ""Livestock"" & !Category == ""unassigned"" & !Category == ""Human"") %>%"
"0","  subset(Depth == ""Bottom"") %>%"
"0","  "
"0","  ## get rid of species with 0 counts in surface samples (ones that only show up in bottom samples)"
"0","  group_by(Species_name) %>%"
"0","  filter((sum(rel_ab) > 0)) %>% ungroup() %>%"
"0","  "
"0","  ## replace zeros with NAs for plotting"
"0","  replace_with_na_all(condition = ~.x == 0.00000) %>%"
"0","  "
"0","  ## plot"
"0","  ggplot(., aes(x=Site, y=Common_name)) +"
"0","  geom_tile(aes(fill = rel_ab), color = ""black"") +"
"0","  theme_classic() +"
"0","  labs(fill = ""Relative Abundance (%)"") + "
"0","  ylab(""Common name"") +"
"0","  xlab(""Site"") +"
"0","  scale_fill_gradient(na.value = ""white"", low = ""lightskyblue2"", high = ""#0C4D66"") + #, direction=1, type = ""seq"", "
"0","  theme(axis.text.x = element_text(angle = 90, size=6, color=""grey25"", hjust = 1),"
"0","        legend.text = element_text(size = 8, color=""black""),"
"0","        legend.title = element_text(margin = margin(t = 0, r = 0, b = 5, l = 0), size=10, color=""black"", face=""bold""),"
"0","        axis.title.y = element_text(margin = margin(t = 0, r = 10, b = 0, l = 0), size=14, face=""bold""),"
"0","        axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0), size=14, face=""bold""),"
"0","        axis.text.y = element_text(colour = 'black', size = 8),"
"0","        legend.position = c(-0.11, -0.04),"
"0","        legend.key.height = unit(5, 'mm'),"
"0","        legend.direction = ""horizontal"","
"0","        legend.key.width = unit(5, 'mm'),"
"0","        legend.title.align = 0.5,"
"0","        legend.title.position = ""top"","
"0","        strip.text.x = element_text(color = ""black"", face = ""bold"", size = 12),"
"0","        strip.text.y = element_text(color = ""black"", face = ""bold"", size = 12, angle=0),"
"0","        strip.background.y = element_blank(),"
"0","        strip.clip = ""off"") +"
"0","  facet_grid2(Category~factor(Month, levels = c(""July"", ""August"", ""September"", ""October"", ""November"")), "
"0","              scales = ""free"", space = ""free"", "
"0","             labeller = labeller(Category = label_wrap_gen(width = 10))) "
